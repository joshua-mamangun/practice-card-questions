(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(5155);r(2115);var n=r(9708),o=r(2085),i=r(9434);let a=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:o,asChild:c=!1,...l}=e,d=c?n.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,i.cn)(a({variant:r,size:o,className:t})),...l})}},1454:(e,t,r)=>{Promise.resolve().then(r.bind(r,4977))},4977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),n=r(7877),o=r(285),i=r(6695),a=r(2115),c=r(968),l=r(9434);function d(e){let{className:t,...r}=e;return(0,s.jsx)(c.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}var u=r(4840),g=r(9428);function m(e){let{className:t,...r}=e;return(0,s.jsx)(u.bL,{"data-slot":"radio-group",className:(0,l.cn)("grid gap-3",t),...r})}function f(e){let{className:t,...r}=e;return(0,s.jsx)(u.q7,{"data-slot":"radio-group-item",className:(0,l.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,s.jsx)(u.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,s.jsx)(g.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var h=r(9249),p=r(1154),v=r(5695);function x(){let e=(0,v.useRouter)(),[t,r]=(0,a.useState)(!1),[c,l]=(0,a.useState)("option-0"),[u,g]=(0,a.useState)(!1),{getCurrentQuestion:x,nextQuestion:b,getCurrentQuestionNo:w,getScores:N,submitAnswer:y,isLastAnsweredQuestionSameAsCurrent:j,getIsShowAnswer:A,isDone:Q}=(0,h.A)(),S=(0,h.A)(),[T,k]=(0,a.useState)(0),[C,R]=(0,a.useState)(null),[q,E]=(0,a.useState)(!1);!function(e){let{onAltTab:t}=e;(0,a.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&t()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[t])}({onAltTab:()=>{S.incrementAltTabbing()}});let[O,z]=(0,a.useState)({category:"#",itemNo:-1,question:"Question",choices:[],scores:{correct:0,wrong:0}}),_=()=>{C&&(clearInterval(C),R(null))},I=()=>{try{if(r(!0),y(Number(c.replace("option-",""))),D(),g(!0),_(),!A())return void U()}catch(e){}finally{r(!1)}},U=()=>{try{if(r(!0),b(),L(),g(!1),M(),Q())return void e.push("/summary")}catch(e){}finally{r(!1)}},D=()=>{let e=N();z({...O,scores:{correct:e.correct,wrong:e.wrong}})},L=()=>{let e=x(),t=N();z({...O,category:e.category,itemNo:w(),question:e.question,choices:e.choices,scores:{correct:t.correct,wrong:t.wrong}}),l("option-0")},M=async()=>{if(!(!S.getIsUsingTimer()||S.isLastAnsweredQuestionSameAsCurrent()))return E(!1),_(),k(S.getTimer()),R(setInterval(()=>{k(e=>e<=1?(_(),E(!0),0):e-1)},1e3)),()=>_()};return(0,a.useEffect)(()=>{L(),g(j()),C||M()},[]),(0,a.useEffect)(()=>{q&&I()},[q]),(0,s.jsxs)("div",{className:"w-full min-h-screen flex flex-col items-center justify-center p-12 gap-12",children:[(0,s.jsx)(n.A,{onRestart:()=>{L(),g(!1),M()},onUploadNewQuestions:()=>{_()}}),O.itemNo>0&&(0,s.jsxs)(i.Zp,{className:"w-[600px] max-w-full font-poppins",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)(i.ZB,{className:"flex-grow",children:[O.category," (",O.itemNo,"/",N().total,")"]}),S.getIsUsingTimer()&&(0,s.jsxs)("p",{children:[T,"s"]})]})}),(0,s.jsxs)(i.Wu,{children:[(0,s.jsx)("p",{className:"text-base",children:O.question}),(0,s.jsx)(m,{defaultValue:"option-0",className:"pt-6 gap-1",value:c,onValueChange:e=>l(e),children:O.choices.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-row gap-2 p-2 items-center\n										".concat(u&&A()&&c==="option-".concat(t)&&!e.isCorrect?" bg-red-400":"","\n										").concat(u&&A()&&e.isCorrect?" bg-green-400":"","\n									"),children:[(0,s.jsx)(f,{id:"option-".concat(t),value:"option-".concat(t),className:"cursor-pointer"}),(0,s.jsx)(d,{htmlFor:"opiton-".concat(t),className:"!text-base font-normal",children:e.label})]},t))})]}),(0,s.jsx)(i.wL,{children:(0,s.jsxs)("div",{className:"w-full flex flex-row items-center justify-end",children:[!u&&(0,s.jsxs)(o.$,{disabled:t,className:"cursor-pointer",onClick:()=>I(),children:[t&&(0,s.jsx)(p.A,{className:"animate-spin"})," Submit"]}),u&&(0,s.jsxs)(o.$,{disabled:t,className:"cursor-pointer",onClick:()=>U(),children:[t&&(0,s.jsx)(p.A,{className:"animate-spin"})," Next"]})]})})]})]})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>a,Zp:()=>o,aR:()=>i,wL:()=>d});var s=r(5155);r(2115);var n=r(9434);function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},7877:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5155),n=r(5695),o=r(6695),i=r(9249),a=r(285);function c(e){let{onRestart:t,onUploadNewQuestions:r}=e,c=(0,n.useRouter)(),l=(0,i.A)();return(0,s.jsx)(o.Zp,{className:"w-[600px] max-w-full font-poppins",children:(0,s.jsx)(o.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-row gap-4 justify-between flex-wrap items-center",children:[(0,s.jsxs)("p",{children:["Correct: ",l.scores.correct]}),(0,s.jsxs)("p",{children:["Wrong: ",l.scores.wrong]}),(0,s.jsx)(a.$,{variant:"outline",className:"cursor-pointer",onClick:()=>{l.restart(),null==t||t()},children:"Restart"}),(0,s.jsx)(a.$,{variant:"outline",className:"cursor-pointer",onClick:()=>{null==r||r(),c.push("/")},children:"Upload New Questions"})]})})})}},9249:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(5453),n=r(6786);let o=(0,s.v)()((0,n.Zr)((e,t)=>({questions:[],isRandomized:!1,isUsingTimer:!1,timer:0,isShowAnswer:!1,currentQuestionNo:1,lastQuestionNoAnswered:0,scores:{correct:0,wrong:0,total:0,categoryScores:[]},dateTimeStart:void 0,dateTimeEnd:void 0,duration:"",noOfAltTabbing:0,noOfRefreshing:0,historyRaw:[],getTimer:()=>t().timer,getIsUsingTimer:()=>t().isUsingTimer,getDuration:()=>t().duration,updateQuestions:t=>e({questions:t,currentQuestionNo:1,isShowAnswer:!1,lastQuestionNoAnswered:0,scores:{correct:0,wrong:0,total:t.length,categoryScores:[]},dateTimeStart:new Date,dateTimeEnd:void 0,duration:""}),setIsRandomized:r=>{e({isRandomized:r}),!0===r&&t().randomized()},randomized:()=>{let r=t().questions;for(let e=0;e<r.length;e++){let t=Math.floor(Math.random()*r.length-e)+e,s=r[e];r[e]=r[t],r[t]=s;let n=r[e].choices;for(let e=0;e<n.length;e++){let t=Math.floor(Math.random()*n.length-e)+e,r=n[e];n[e]=n[t],n[t]=r}}r.sort((e,t)=>e.category.localeCompare(t.category)),e({questions:r})},updateIsUsingTimer:(t,r)=>e({isUsingTimer:t,timer:r}),nextQuestion:()=>{t().currentQuestionNo+1<=t().questions.length&&e({currentQuestionNo:t().currentQuestionNo+1})},getCurrentQuestion:()=>{var e;let{questions:r,currentQuestionNo:s}=t();return null!=(e=r[s-1])?e:{}},getCurrentQuestionNo:()=>t().currentQuestionNo,getScores:()=>t().scores,submitAnswer:r=>{if(t().currentQuestionNo===t().lastQuestionNoAnswered)return;let s=t().questions[t().currentQuestionNo-1],n=s.choices[r].isCorrect;n?e({scores:{...t().scores,correct:t().scores.correct+1}}):e({scores:{...t().scores,wrong:t().scores.wrong+1}}),t().scores.categoryScores.some(e=>e.label===s.category)||e({scores:{...t().scores,categoryScores:[...t().scores.categoryScores,{label:s.category,correct:0,wrong:0,total:0}]}}),e({scores:{...t().scores,categoryScores:t().scores.categoryScores.map(e=>e.label!==s.category?e:{...e,correct:n?e.correct+1:e.correct,wrong:n?e.wrong:e.correct-1,total:e.total+1})}}),e({lastQuestionNoAnswered:t().currentQuestionNo}),t().currentQuestionNo===t().questions.length&&(e({dateTimeEnd:new Date}),t().calculateDuration(),t().addToHistory())},calculateDuration:()=>{let r=t().dateTimeStart,s=t().dateTimeEnd;if(void 0===r||void 0===s)return;let n=Math.floor((s.getTime()-r.getTime())/1e3),o=Math.floor(n/3600),i=Math.floor(n%3600/60);e({duration:"".concat(o,"h ").concat(i,"m ").concat(n%60,"s")})},isLastAnsweredQuestionSameAsCurrent:()=>t().currentQuestionNo===t().lastQuestionNoAnswered,getIsShowAnswer:()=>t().isShowAnswer,setIsShowAnswer:t=>e({isShowAnswer:t}),isDone:()=>t().currentQuestionNo===t().questions.length&&t().currentQuestionNo===t().lastQuestionNoAnswered,restart:()=>e({currentQuestionNo:1,lastQuestionNoAnswered:0,scores:{...t().scores,correct:0,wrong:0,categoryScores:[]},dateTimeStart:new Date,dateTimeEnd:void 0,duration:"",noOfAltTabbing:0,noOfRefreshing:0}),incrementAltTabbing:()=>{e({noOfAltTabbing:t().noOfAltTabbing+1})},incrementRefreshing:()=>{e({noOfRefreshing:t().noOfRefreshing+1})},addToHistory:()=>{let r=Object.fromEntries(Object.entries(t()).filter(e=>"function"!=typeof e[1]));e({historyRaw:[...t().historyRaw,JSON.stringify(r)]})}}),{name:"questionnaire-store"}))},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(2596),n=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[241,404,284,441,684,358],()=>t(1454)),_N_E=e.O()}]);